---
import Analytics from '@components/Analytics.astro'
const { title = 'Homy Estate', description = 'Find your dream home' } = Astro.props
---
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content={description} />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Urbanist:wght@600;700;800&display=swap" rel="stylesheet" />
    <script>
      const k='theme';
      const s=localStorage.getItem(k);
      const d=window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches;
      const t=s||(d?'dark':'light');
      if(t==='dark'){document.documentElement.classList.add('dark')}
    </script>
    <link rel="stylesheet" href="/global.css" />
    <title>{title}</title>
  </head>
  <body class="bg-bg text-text antialiased">
    <slot />
    <Analytics />
    <script>
      (function(){
        const k='theme';
        const btn=document.getElementById('theme-toggle');
        const set=(t)=>{document.documentElement.classList.toggle('dark',t==='dark');document.documentElement.dataset.theme=t;localStorage.setItem(k,t);if(btn){const isDark=t==='dark';const ld=btn.querySelector('[data-light]');const dk=btn.querySelector('[data-dark]');if(ld) ld.classList.toggle('hidden',t!=='light');if(dk) dk.classList.toggle('hidden',t!=='dark')}};
        const init=()=>{const s=localStorage.getItem(k);const d=window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches;set(s||(document.documentElement.classList.contains('dark')?'dark':(d?'dark':'light')))};
        init();
        if(btn){btn.addEventListener('click',function(){const cur=document.documentElement.classList.contains('dark')?'dark':'light';set(cur==='dark'?'light':'dark')})}
      })();
    </script>
  </body>
</html>
